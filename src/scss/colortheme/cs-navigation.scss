/* -----------------------------------------
   NAVIGATION
   /source/scss/colortheme/cs-navigation.scss
----------------------------------------- */

// NAVIGATION ACTIVE STYLE
// --------------------------------------------------
.nav-item,
.nav-item-search {
  &.active {
    > a,
    .first-level-btn,
    .first-level-link {
      color: var(--color-p2, #046b99);
      > span[class^="ca-gov-icon"] {
        color: var(--gray-900, #3b3a48);
      }
    }
  }

  &:hover,
  &:focus {
    @media (min-width: $screen-sm-min) {
      background-color: var(--sub-nav-bg, #f1f8fb);
    }

    > a,
    .first-level-btn,
    .first-level-link {
      color: var(--color-p2, #046b99);
      > span[class^="ca-gov-icon"] {
        color: var(--gray-900, #3b3a48);
      }
    }
  }
}

.nav-arrow-down {
  background: var(--color-p2, #046b99);
}

// FIRST LEVEL LINKS
// --------------------------------------------------

.first-level-link,
.first-level-btn {
  color: var(--color-p2, #046b99);

  > span[class^="ca-gov-icon"]:not(.carrot) {
    /* Navigation icons */
    color: var(--gray-700, #5e5e6a);
  }

  &:hover,
  &:focus {
    color: var(--gray-900, #3b3a48);
  }

  // 991
  @media (max-width: $screen-sm-max) {
    &.active {
      background-color: var(--mobile-drawer-active, #046b99) !important;
      color: var(--white, #fff) !important;

      &:hover,
      &:focus {
        background-color: var(--mobile-drawer, #214a68) !important;
        color: var(--white, #fff) !important;
      }

      &::before,
      &::after {
        border-left: none !important;
      }
    }

    &:hover,
    &:focus {
      background-color: var(--mobile-drawer-active, #046b99) !important;
      color: var(--white, #fff) !important;
    }
  }
}

// SECOND LEVEL LINKS
// --------------------------------------------------

.second-level-link {
  color: var(--color-p2, #046b99);

  [class^="ca-gov-icon-"] {
    color: var(--gray-700, #5e5e6a);
  }

  // 991px
  @media (max-width: $screen-sm-max) {
    background-color: var(--mobile-drawer, #214a68);

    &.active {
      background-color: var(--mobile-drawer-active, #046b99);

      &:hover,
      &:focus {
        background-color: var(--mobile-drawer, #214a68);
      }
    }
  }
}

.second-level-nav {
  > li {
    border: 1px solid transparent;
    border-right: 4px solid var(--white, #fff); // beta 6.0 addition
    border-bottom: 4px solid var(--white, #fff); // beta 6.0 addition

    &:hover,
    &:focus {
      background: #fff;
    }

    @media (max-width: $screen-sm-max) {
      border: none; // beta 5.0 addition (for accessible menu)
      border-top: 1px solid var(--gray-200, #d4d4d7);

      &:hover,
      &:focus {
        background: color-mix(in srgb, var(--color-s1), #fff 6%);
      }
    }
  }

  .link-description {
    color: var(--gray-700, #5e5e6a);
  }
}

// SUB NAV CONTAINER
// --------------------------------------------------

.sub-nav {
  background: var(--white, #fff);
}

@media (max-width: $screen-xs-max) {
  .sub-nav {
    border-top: none;
    border-bottom: none;
  }
}

// MEDIA IN SUB NAV
// --------------------------------------------------

.nav-media {
  background: $sub-nav-media-bg;

  // Add the border to the first one only
  .media {
    &:hover {
      background: #fff;
    }

    border-bottom: 4px solid var(--white, #fff);

    @media (max-width: $screen-xs-max) {
      border-bottom: 4px solid var(--white, #fff);

      &:hover,
      &:focus {
        background: color-mix(in srgb, var(--color-s1), #fff 6%);
      }
    }
  }
}

// Accessible menu
// beta 5.0 addition (for accessible menu)
@media (min-width: $screen-sm-min) {
  .nav-item {
    &::after {
      background-color: transparent;
    }

    &:hover::after,
    &:focus::after {
      background-color: var(--color-p2, #046b99);
    }
  }

  /* full width navigation */
  .nav-full-width {
    background: var(--color-p2, #046b99);

    .main-navigation .nav-item:hover,
    .main-navigation .nav-item:focus,
    .main-navigation .nav-item.active:hover {
      background-color: var(--color-p2-darker, #214a68);
    }

    .main-navigation .nav-item.active {
      background-color: var(--color-p2-dark, #29597f);
    }
  }
}

@media (max-width: $screen-sm-max) {
  .nav-item {
    &.active {
      .first-level-btn {
        background-color: var(--mobile-drawer-active, #046b99) !important;
        color: var(--white, #fff) !important;

        &:hover,
        &:focus {
          background-color: var(--mobile-drawer, #214a68) !important;
          color: var(--white, #fff) !important;
        }

        &::before,
        &::after {
          border-left: none !important;
        }
      }
    }
  }
}

.has-sub .rotate {
  color: var(--color-p2, #046b99);
}

/* Dark Mobile menu */
@media (max-width: $screen-sm-max) {
  .navigation-search {
    background-color: var(--mobile-drawer, #214a68);
  }
}
