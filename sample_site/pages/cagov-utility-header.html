---
landing: Components
permalink: cagov-utility.html
title: Components and patterns
---

<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
<div class="cagov-header-shell">
  <div class="cagov-utility">
    <div class="cagov-container">
      <div class="cagov-utility-bar">
        <!-- CA.gov Logo -->
        <div class="cagov-logo">
          <a href="https://www.ca.gov" class="cagov-utility-link"
            ><span class="cagov-sr-only">CA.gov</span>
            <svg
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 531 300">
              <path
                fill="#2F85B0"
                d="M316 122h5c10 0 21 4 31 8c1 1 3 1 4 2c1 0 1 0 2 1l22-57l21 53h12c14 0 27 2 39 5L405 12h-51l-43 111c1-1 3-1 5-1z" />
              <path
                fill="#B91F39"
                d="M181 94l-9 28h-31l24 17-8 27l24-16l24 16-8-28l23-17h-30z" />
              <path
                fill="#693B17"
                d="M518 227c-1-8-7-25-13-30c3-8-1-11-3-14-1-1-5-3-7-3-6-10-20-18-39-24-12-4-27-6-44-6h-8c-15 1-38 4-44 4-2 0-8-3-15-5-8-3-17-6-24-6h-2c-6 1-21 10-27 13-4 2-16 7-20 10h-3c-9 3-15 13-18 15c0-1-4-6-8-6h-2c-6 2-5 7-5 9-1 0-3-2-6-2-1 0-2 0-4 1-6 3-3 9-4 11-2 3-10 10-12 15-1 2 0 8-1 10-2 6-16 17-17 19c0 1 3 5 8 8c4 3 9 6 12 7c8 0 25-3 29-4c1 0 3 1 6 1c2 1 5 1 8 1h3c4-1 7-3 9-5c4-4 6-8 10-10c3-1 7-2 11-2c2 0 3 0 5 1-7 12-5 27-7 30-3 2-5 5-6 7-6 9-6 16-9 18-1 0-2 1-3 1-3 0-7-1-10-1h-2c-3 1-12 9-9 11h40l8-7h20c2 0 2-3 10-8c10-4 5-22 17-37c0 0 4-3 5-3c4 0 11 8 37 8c26 0 32-9 36-9c2 0 5 3 5 4-12 20 18 42 15 43-1 0-4-2-8-2-2 0-4 0-6 1-5 2-9 8-5 9h41c1 0 1-3 1-6v-4c1-2 2-7 5-11c3-3 5-6 8-6c1 0 2 0 3 1c5 3 19 5 26 7c3 1 5 2 5 4c0 1-1 1-2 1h-1c-2 0-4-1-7-1-1 0-2 0-3 1-3 1-7 5-8 8c0 1 0 3 1 3h31c4 0 2-7 10-23c1-4-10-11-12-19c0-6-1-17-1-28z" />
              <path
                fill="#2F85B0"
                d="M150 299c32 0 55-6 76-18l5-11c-7 1-14 2-20 2h-3l-2-1c-5-1-12-5-19-11-3-2-7-6-11-11-8 2-16 3-26 3-60 1-103-42-103-102C47 92 92 47 150 47c32 0 61 13 87 39l19-47c-29-24-66-38-104-38C110 1 73 15 45 42C16 69 0 107 0 150c0 87 62 149 150 149z" />
              <path
                fill="#326130"
                d="M150 299c32 0 55-6 76-18l5-11c-7 1-14 2-20 2h-3l-2-1c-5-1-12-5-19-11-3-2-7-6-11-11-8 2-16 3-26 3-42 0-74-20-91-51H8c19 60 72 98 142 98z" /></svg></a
          ><!-- end CA.gov Logo -->
        </div>

        <!--cagov menu-->
        <button
          class="cagov-utility-menu-button"
          aria-expanded="false"
          aria-controls="cagov-utility-menu">
          <span class="underline">ca.gov menu</span>
        </button>

        <!--cagov collapsible menu content-->
        <div
          class="collapsible-content"
          id="cagov-utility-menu"
          hidden="hidden">
          <nav aria-label="ca.gov navigation">
            <ul>
              <li>
                <a
                  href="https://www.ca.gov/services/"
                  target="_blank"
                  rel="noopener noreferrer"
                  >Services</a
                >
              </li>
              <li>
                <a
                  href="https://www.ca.gov/departments/"
                  target="_blank"
                  rel="noopener noreferrer"
                  >Departments</a
                >
              </li>
              <li>
                <a
                  href="https://www.ca.gov/about-california/"
                  target="_blank"
                  rel="noopener noreferrer"
                  >About California</a
                >
              </li>
              <li>
                <a
                  href="https://www.ca.gov/support/"
                  target="_blank"
                  rel="noopener noreferrer"
                  >Get help</a
                >
              </li>
            </ul>
          </nav>
        </div>
        <!--end cagov collapsible menu content-->

        <!--end cagov menu-->

        <!--Search-->
        <button
          class="cagov-utility-search-button"
          aria-expanded="false"
          aria-controls="cagov-utility-search">
          <span class="cagov-sr-only">CA.gov search</span>
          <svg
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 2400 2400">
            <path
              d="M2253 1833l-71-59-224-181-317-262c65-116 99-245 99-376c0-195-75-390-226-541-147-147-342-219-541-219-411 0-760 349-760 760c0 414 343 764 757 764c154 0 308-46 439-136l326 270l223 180l77 64c38 31 93 26 124-12l106-128c31-37 26-93-12-124zm-945-546c-92 92-212 137-335 137-250 0-466-212-466-469c0-250 212-466 466-466c260 0 472 212 472 466c0 120-48 240-137 332z" />
          </svg>
        </button>
        <!--End search-->

        <!-- collapsible search content-->
        <div
          class="collapsible-content cagov-search"
          id="cagov-utility-search"
          hidden="hidden">
          <form
            action="https://www.ca.gov/search/"
            method="get"
            role="search"
            aria-label="Search ca.gov">
            <label for="cagov-search-input" class="cagov-sr-only"
              >Search ca.gov</label
            >
            <input
              type="search"
              id="cagov-search-input"
              name="q"
              placeholder="Search ca.gov"
              aria-describedby="cagov-search-button" />
            <button
              type="submit"
              id="cagov-search-button"
              aria-label="Submit search">
              <svg
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 2400 2400">
                <path
                  d="M2253 1833l-71-59-224-181-317-262c65-116 99-245 99-376c0-195-75-390-226-541-147-147-342-219-541-219-411 0-760 349-760 760c0 414 343 764 757 764c154 0 308-46 439-136l326 270l223 180l77 64c38 31 93 26 124-12l106-128c31-37 26-93-12-124zm-945-546c-92 92-212 137-335 137-250 0-466-212-466-469c0-250 212-466 466-466c260 0 472 212 472 466c0 120-48 240-137 332z" />
              </svg>
            </button>
          </form>
        </div>
        <!-- end collapsible search content-->
      </div>
      <!-- .cagov-utility-bar -->
    </div>
    <!-- .cagov-container -->
  </div>
  <!-- .cagov-utility -->
</div>
<!-- .cagov-header-shell -->

<style>
        body {margin:0;padding:0;}

      .cagov-header-shell {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Public Sans", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", sans-serif;
        color: #3b3a48;

        *,
        *::before,
        *::after {
          box-sizing: border-box;
          margin: 0;
        }
      }

      .cagov-container {
        width: 100%;
        padding-right: 15px;
        padding-left: 15px;
        margin-right: auto;
        margin-left: auto;

        @media (min-width: 576px) {
          max-width: 540px;
        }
        @media (min-width: 768px) {
          max-width: 720px;
        }
        @media (min-width: 992px) {
          max-width: 960px;
        }
        @media (min-width: 1200px) {
          max-width: 1140px;
        }
      }

      /* Global utility styles */
      :focus {
      outline: 2px solid #0b8ee5;
    }

    a {
      color: #046b99;

      &:hover,
      &:focus {
        color: #035376;
      }
    }

    .underline {
      text-decoration: underline;
    }

        .d-none {
      display: none;
  }

    .cagov-sr-only {
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0, 0, 0, 0) !important;
      white-space: nowrap !important;
      border: 0 !important;
    }

    .cagov-utility {
      background-color: #f5f9fa;
      min-height: 42px;
      padding: .25rem 0;

      .cagov-logo {
        display: inline-block;
        flex-grow: 1;
        flex-shrink: 0;
        align-self: center;
      }

      .cagov-utility-link svg {
        vertical-align: middle;
        aspect-ratio: 9 / 5;
        display: inline-block;
        width: 50px;
      }

      .cagov-utility-bar {
        width: 100%;
        display: flex;
        flex-wrap: wrap;
      }

      .cagov-utility-menu-button {
        margin-left: auto;
        background: none;
        border: none;
        color: #3b3a48;
        font-size: 1rem;
        cursor: pointer;
        padding: 0.35rem 0.5rem;

        &::after {
          content: "";
          display: inline-block;
          text-decoration: none;
          position: relative;
          width: .4rem;
          height: .4rem;
          border-top: 1px solid #000;
          border-left: 1px solid #000;
          transform: rotate(225deg);
          vertical-align: middle;
          margin-left: 3px;
          transition: transform 0.3s;
        }

        &[aria-expanded="true"]::after {
          transform: rotate(45deg);
          top: 2px;
        }

        &:focus,
        &:hover {
          color: #000;
          outline-offset: -2px;
        }
      }

      .cagov-utility-search-button {
        background: none;
        border: none;
        color: #3b3a48;
        font-size: 1rem;
        cursor: pointer;
        padding: 0.2rem 0.35rem;
        margin-left: 0;
        position: relative;
        left: 0.35rem;
        top: 2px;
        transition: color 0.2s;
        width: 34px;
        height: 30px;

        &[aria-expanded="true"] svg {
          display: none;
        }

        &[aria-expanded="true"]::after {
          content: "";
          display: inline-block;
          width: 24px;
          height: 24px;
          margin-left: 0px;
          position: relative;
          top: 3px;
        }

        &[aria-expanded="true"]::before,
        &[aria-expanded="true"]::after {
          content: "";
          position: absolute;
          left: 5px;
          top: 14px;
          width: 24px;
          height: 3px;
          background: #3b3a48;
          border-radius: 2px;
          transition: transform 0.3s;
        }

        &[aria-expanded="true"]::before {
          transform: rotate(45deg);
        }

        &[aria-expanded="true"]::after {
          transform: rotate(-45deg);
        }

        &.rotating::before {
          transform: rotate(135deg);
        }

        &.rotating::after {
          transform: rotate(45deg);
        }
      }
    }
    /* Collapsible content styles */
    .cagov-utility {
      .collapsible-content {
        background-color: #f5f9fa;
        padding-top: 1rem;
        padding-bottom: 1rem;
        line-height: 1.5;
        width: 100%;
        order: 1;

        /* Navigation styles */
        nav {
          ul {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            align-items: flex-end;
            justify-content: flex-end;
            padding: 0;
            position: relative;
            left: 0.35rem;

            a {
              padding: 0.35rem;
            }
          }
        }
      }
    }

    @media (min-width: 540px) {
      .cagov-utility .collapsible-content nav ul {
        flex-direction: row;
        gap: 1.5rem;
      }
    }

    /* Search styles */
    .cagov-search {
      form {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      }

      input[type="search"] {
      font-size: 1.1rem;
      width: 100%;
      max-height: 38px;
      padding: 0 10px;
      transition: border 0.4s;
      border: 1px solid #72717c;
      border-radius: 5px 0 0 5px;
      height: 38px;
      outline-offset: -2px;
      }

      #cagov-search-button {
      outline-offset: -4px;
      outline-color: #85cbf9;
      background-color: #72717c;
      color: #fff;
      border-radius: 0 5px 5px 0;
      padding: 0 12px;
      border: 1px solid #72717c;
      min-height: 38px;
      margin-left: -1px;

      svg path {
        fill: #fff;
      }
      }
    }
</style>
<script>
  class CagovUtilityMenuToggle {
    constructor() {
      this.menuButton = document.querySelector('.cagov-utility-menu-button');
      this.menuContent = document.getElementById('cagov-utility-menu');
      this.searchContent = document.getElementById('cagov-utility-search');
      if (this.menuButton && this.menuContent) {
        this.menuButton.addEventListener('click', () => this.toggleMenu());
      }
    }

    toggleMenu() {
      const expanded = this.menuButton.getAttribute('aria-expanded') === 'true';
      this.menuButton.setAttribute('aria-expanded', !expanded);
      if (expanded) {
        this.menuContent.setAttribute('hidden', 'hidden');
      } else {
        this.menuContent.removeAttribute('hidden');
        // Hide search if open
        if (this.searchContent && !this.searchContent.hasAttribute('hidden')) {
          this.searchContent.setAttribute('hidden', 'hidden');
          const searchButton = document.querySelector('.cagov-utility-search-button');
          if (searchButton) {
            searchButton.setAttribute('aria-expanded', 'false');
            searchButton.classList.remove('rotating');
          }
        }
      }
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    new CagovUtilityMenuToggle();
  });

  class CagovUtilitySearchToggle {
    constructor() {
      this.searchButton = document.querySelector('.cagov-utility-search-button');
      this.searchContent = document.getElementById('cagov-utility-search');
      this.menuContent = document.getElementById('cagov-utility-menu');
      if (this.searchButton && this.searchContent) {
        this.searchButton.addEventListener('click', () => this.toggleSearch());
      }
    }

    toggleSearch() {
      const expanded = this.searchButton.getAttribute('aria-expanded') === 'true';
      this.searchButton.setAttribute('aria-expanded', !expanded);
      if (expanded) {
        this.searchContent.setAttribute('hidden', 'hidden');
      } else {
        this.searchContent.removeAttribute('hidden');
        // Hide menu if open
        if (this.menuContent && !this.menuContent.hasAttribute('hidden')) {
          this.menuContent.setAttribute('hidden', 'hidden');
          const menuButton = document.querySelector('.cagov-utility-menu-button');
          if (menuButton) {
            menuButton.setAttribute('aria-expanded', 'false');
          }
        }
      }
      setTimeout(() => {
        this.searchButton.classList.toggle('rotating');
      }, 10);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    new CagovUtilitySearchToggle();
  });


  class CagovUtilityMenuFocusOut {
    constructor() {
      this.menuButton = document.querySelector('.cagov-utility-menu-button');
      this.menuContent = document.getElementById('cagov-utility-menu');
      this.searchButton = document.querySelector('.cagov-utility-search-button');
      if (this.menuContent && this.menuButton) {
        this.menuContent.addEventListener('focusout', (e) => this.handleFocusOut(e));
        this.menuButton.addEventListener('focusout', (e) => this.handleFocusOut(e));
      }
    }

    handleFocusOut(event) {
      const relatedTarget = event.relatedTarget;
      // Get all focusable elements inside menuContent
      const focusableSelectors = [
        'a[href]', 'button:not([disabled])', 'input:not([disabled])',
        'select:not([disabled])', 'textarea:not([disabled])', '[tabindex]:not([tabindex="-1"])'
      ];
      const focusableElements = Array.from(this.menuContent.querySelectorAll(focusableSelectors.join(',')))
        .filter(el => el.offsetParent !== null);

      // If focus moves outside menuButton, menuContent, or searchButton, close menu
      if (
        !this.menuButton.contains(relatedTarget) &&
        !this.menuContent.contains(relatedTarget) &&
        !this.searchButton.contains(relatedTarget)
      ) {
        this.menuContent.setAttribute('hidden', 'hidden');
        this.menuButton.setAttribute('aria-expanded', 'false');
        return;
      }

      // If focus leaves the last focusable element in menuContent, close menu
      if (focusableElements.length > 0 && event.target === focusableElements[focusableElements.length - 1]) {
        if (
          !this.menuContent.contains(relatedTarget)
        ) {
          this.menuContent.setAttribute('hidden', 'hidden');
          this.menuButton.setAttribute('aria-expanded', 'false');
        }
      }
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    new CagovUtilityMenuFocusOut();
  });


  class CagovUtilitySearchFocusOut {
    constructor() {
      this.searchButton = document.querySelector('.cagov-utility-search-button');
      this.searchContent = document.getElementById('cagov-utility-search');
      this.menuButton = document.querySelector('.cagov-utility-menu-button');
      if (this.searchContent && this.searchButton) {
        this.searchContent.addEventListener('focusout', (e) => this.handleFocusOut(e));
        this.searchButton.addEventListener('focusout', (e) => this.handleFocusOut(e));
      }
    }

    handleFocusOut(event) {
      const relatedTarget = event.relatedTarget;
      // Only keep open if focus moves to menu button or search button itself
      if (
        !this.menuButton.contains(relatedTarget) &&
        !this.searchButton.contains(relatedTarget) &&
        !this.searchContent.contains(relatedTarget)
      ) {
        this.searchContent.setAttribute('hidden', 'hidden');
        this.searchButton.setAttribute('aria-expanded', 'false');
        this.searchButton.classList.remove('rotating');
      }
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    new CagovUtilitySearchFocusOut();
  });
</script>
